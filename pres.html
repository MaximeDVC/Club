<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Bienvenue Explorateur</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      margin: 0;
      padding: 0;
      background: url('fond-colorise.png') no-repeat center center fixed;
      background-size: cover;
      font-family: 'Georgia', serif;
      color: #003366;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-end;
      height: 100vh;
    }

    .mascotte {
      position: absolute;
      bottom: 0;
      left: 10px;
      width: 25vw;
      max-width: 180px;
      transition: transform 0.3s ease;
      z-index: 2;
    }

    .rebond {
      transform: translateY(-10px);
    }

    .bulle {
      background-color: white;
      border-radius: 25px;
      padding: 20px;
      margin: 20px;
      max-width: 80%;
      font-size: 1.2em;
      box-shadow: 0 0 10px #888;
      position: relative;
      cursor: pointer;
      z-index: 1;
    }

    .bulle::after {
      content: '';
      position: absolute;
      bottom: -20px;
      left: 50px;
      border-width: 20px 20px 0;
      border-style: solid;
      border-color: white transparent transparent transparent;
    }

    #texte {
      min-height: 80px;
    }

    .btn {
      display: none;
      background-color: #003366;
      color: white;
      padding: 15px 30px;
      border: none;
      border-radius: 30px;
      font-size: 1.2em;
      cursor: pointer;
      box-shadow: 0 0 10px #003366;
      margin-bottom: 30px;
    }

    .btn:hover {
      background-color: #005599;
    }

    audio {
      display: none;
    }
  </style>
</head>
<body onclick="lancerAudio()">

  <!-- Mascotte -->
  <img src="mascotte.png" alt="Mascotte" class="mascotte" id="mascotte">

  <!-- Bulle de texte -->
  <div class="bulle" onclick="prochaineBulle()">
    <div id="texte"></div>
  </div>

  <!-- Bouton de fin -->
  <button class="btn" onclick="window.location.href='page2.html'">C’est parti !</button>

  <!-- Sons -->
  <audio id="musique" src="Monokuma-ost.mp3" loop></audio>
  <audio id="clic" src="clic.wav"></audio>

  <script>
    const bulles = [
      "Oh ! Un visiteur !",
      "Enchanté explorateur ! Je suis Basile, membre émérite du club des Explorateurs d'Arts.",
      "Si tu es ici, c’est que tu as trouvé notre porte dérobée pour entrer dans le club. C'est un lieu superbe, ouvert à tous, destiné à en découvrir plus sur l'art et ses multiples facettes.",
      "Le club s'adresse d'abord aux enfants, mais rien n'interdit à leurs parents de les accompagner dans cette aventure. D'ailleurs, en passant par la porte secrète, ils leurs faudra l'aide d'adultes investis et curieux.",
      "Cette porte mystérieuse vous propose d'explorer notre belle ville, et d'en savoir plus sur comment l'art l'a influencée. Un chemin rempli d'énigme, avec à la clé une récompense collector, réservée à l'élite de notre club.",
      "Voilà comment ça va se passer. Il y a derrière moi 7 portes, qui représente chacune un art. Quand tu ouvriras l'une d'elle, tu obtiendras des coordonnées GPS qui t'amènerons à un lieu de la ville. Une fois au bon endroit, tu y trouveras une énigme.",
      "Il te suffira de trouver la réponse et de l'inscrire en dessous de la coordonnée. Si tu as juste, tu obtiendras une lettre. Quand tu seras en possession des 7 lettres, tu pourras rentrer le code final et ouvrir la véritable porte du club.",
      "Tu as tout compris ? Parfait, alors il ne me reste plus qu'à te souhaiter une bonne exploration. On se retrouve derrière la porte finale. Que l'art soit avec toi !
    ];

    let indexBulle = 0;
    let i = 0;
    let audioLancé = false;
    const vitesse = 35;

    function afficherTexteLigneParLigne() {
      const texteElement = document.getElementById("texte");
      if (i < bulles[indexBulle].length) {
        texteElement.innerHTML += bulles[indexBulle].charAt(i);
        i++;
        setTimeout(afficherTexteLigneParLigne, vitesse);
      }
    }

    function prochaineBulle() {
      if (i < bulles[indexBulle].length) return;

      // Son
      const clicAudio = document.getElementById("clic");
      clicAudio.currentTime = 0;
      clicAudio.play();

      // Animation mascotte
      const mascotte = document.getElementById("mascotte");
      mascotte.classList.add("rebond");
      setTimeout(() => mascotte.classList.remove("rebond"), 300);

      // Nouvelle bulle
      indexBulle++;
      i = 0;
      if (indexBulle < bulles.length) {
        document.getElementById("texte").innerHTML = "";
        afficherTexteLigneParLigne();
      } else {
        document.querySelector(".bulle").style.display = "none";
        document.querySelector(".btn").style.display = "block";
      }
    }

    function lancerAudio() {
      if (!audioLancé) {
        document.getElementById("musique").play();
        audioLancé = true;
      }
    }

    window.onload = afficherTexteLigneParLigne;
  </script>
</body>
</html>
